# SourceMod: Ban Player Sprays

A fork of [TnTSCS's plugin](https://forums.alliedmods.net/showthread.php?t=195096).

This plugin will give admins the ability to permanently ban a player's ability to use the in-game spray function. Once banned, a player will not be able to spray anymore until an admin removes the ban.

## Commands

* `sm_banspray`:
  * **Description:** Permanently remove a player's ability to use sprays based on a partial or full name match.
  * **Required Admin Flags**: ban.
  * **Parameters:**
    * **Player name:** (*Mandatory*) Player's display name on the server.
* `sm_unbanspray`:
  * **Description:** Remove a player's spray ban on a partial or full name match.
  * **Required Admin Flags**: ban.
  * **Parameters:**
    * **Player name:** (*Mandatory*) Player's display name on the server.
* `sm_banspray_list`
  * **Description:** List of players currently connected who are banned from using sprays.
  * **Required Admin Flags**: ban.
* `sm_banspray_steam`:
  * **Description:** Manually add a player's SteamID64 identifier to the ban list.
  * **Required Admin Flags**: ban.
  * **Parameters:**
    * **Steam ID:** (*Mandatory*) The 17-digit SteamID64 player identifier.
* `sm_deletespray`:
  * **Description:** Removes a player's spray by either looking at it or providing a player's name.
  * **Required Admin Flags**: ban.
  * **Parameters:**
    * **Player name:** (*Optional*) Player's display name on the server.

## Configuration

The primary configuration file is automatically generated by SourceMod and located at `tf/cfg/sourcemod/plugin.ban_player_sprays.cfg`.

```
// If player's SteamID hasn't been authenticated yet, restrict sprays?
// 0 = No, allow
// 1 = Yes Do Not Allow
// -
// Default: "0"
sm_bannedsprays_auth "0"

// Enable some debug logging?
// 0 = No
// 1 = Yes
// -
// Default: "0"
sm_bannedsprays_debug "0"

// Display Options (add them up and put total in CVar)
// 1 = CenterText
// 2 = HintText
// 4 = HudHintText
// -
// Default: "4"
// Minimum: "1.000000"
// Maximum: "7.000000"
sm_bannedsprays_display "4"

// Distance, in hammer units, to not allow another user to spray next to a user's current spray
// 0 = DISABLED
// >0 = Distance to protect sprays
// -
// Default: "0"
// Minimum: "0.000000"
// Maximum: "1000.000000"
sm_bannedsprays_protection "0"

// Remove the player's spray after they are banned from using sprays?
// 0 = Leave Spray
// 1 = Remove Spray
// -
// Default: "1"
sm_bannedsprays_remove "1"

// Location for sprays to be moved to.
// Must have 2+ decimal places to be valid
// -
// Default: "0.00 0.00 0.00"
sm_bannedsprays_tmploc "0.00 0.00 0.00"

// Trace all player sprays to display info when aimed at?
// 0 = No
// 1 = Yes
// -
// Default: "1"
sm_bannedsprays_trace "1"

// How far away the spray is from the aim to be traced
// -
// Default: "25.0"
// Minimum: "1.000000"
// Maximum: "250.000000"
sm_bannedsprays_tracedist "25.0"

// Rate at which to check all player sprays (in seconds)
// -
// Default: "3.0"
// Minimum: "1.000000"
sm_bannedsprays_tracerate "3.0"

// Display Options (add them up and put total in CVar) for warning players when they try to spray over another player's spray
// 1 = CenterText
// 2 = HintText
// 4 = HudHintText
// -
// Default: "2"
// Minimum: "1.000000"
// Maximum: "7.000000"
sm_bannedsprays_warntype "2"
```

## Dependencies

- [More Colors](https://forums.alliedmods.net/showthread.php?t=185016)

## Installation

Follow the standard SourceMod process for installation by adding the compiled plugin `ban_player_sprays.smx` to `tf/addons/sourcemod/plugins/` and reloading all plugins or restarting the server.
